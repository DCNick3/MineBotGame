<meta charset="UTF-8"> <style> table { width: 100% !important; } table, th, td { border: 1px solid black; } .caption { font-style: italic; } </style>
<h3 id="protocol">Protocol</h3>
<h1 id="глобальные-параметры-игрока">Глобальные параметры игрока</h1>
<ul>
<li>максимальное количество юнитов</li>
<li>текущее количество юнитов</li>
<li>максимальное количество баз</li>
<li>текущее количество баз</li>
<li>максимальное количество ресурсов</li>
<li>текущее количество ресурсов</li>
<li>количество зданий?</li>
</ul>
<h2 id="протокол-клиент">Протокол (клиент)</h2>
<table style="width:17%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Название</strong></th>
<th><strong>Аргументы</strong></th>
<th><strong>Описание</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>UpdateState</strong></td>
<td><strong>UnitMaxCount</strong> : int, <strong>UnitCount:</strong> int, <strong>BaseMaxCount:</strong> int, <strong>BaseCount:</strong> int, <strong>ResMaxCount:</strong> int, <strong>ResCount:</strong> int, <strong>EnergyFlow</strong> int</td>
<td>Возникает при изменении глобальных параметров игрока, до его хода. <strong>UnitMaxCount</strong> – актуальное максимальное количество юнитов игрока, <strong>UnitCount -</strong> актуальное текущее количество юнитов игрока, <strong>BaseMaxCount -</strong> актуальное максимальное количество баз игрока, <strong>BaseCount -</strong> актуальное текущее количество баз игрока, <strong>ResMaxCount -</strong> актуальное максимальное количество ресурсов игрока, <strong>ResCount -</strong> актуальное текущее количество ресурсов игрока, <strong>EnergyFlow</strong> - актуальный вырабатываемый поток энергии игрока, <strong>EnergyUse</strong> - актуальный потребляемый поток энергии игрока</td>
</tr>
<tr class="even">
<td><strong>OpponentActions</strong></td>
<td><strong>ActionList</strong> : object</td>
<td>Возникает после хода каждого оппонента. <strong>ActionList</strong> - список действий оппонента</td>
</tr>
</tbody>
</table>
<h1 id="действия-игрока">Действия игрока</h1>
<ul>
<li>Добыть ресурс</li>
<li>Построить здание</li>
<li>Построить юнита</li>
<li>Сделать апгрейд</li>
<li>Создать модуль</li>
<li>Просканировать комнату</li>
<li>Простой <em>(не будет описан. Если от объекта не была получена команда, значит автоматически простой)</em></li>
<li>Саморазрушение</li>
</ul>
<p><em>Как мне кажется, все должно контролиться серваком. Т.е. там же должна быть инфа о том, сколько ходов длится каждое из действий. Соответственно клиент на каждом ходу будет &quot;подтверждать&quot; продолжение длительного действия (скорее всего передавая ту же команду), сервак же в свою очередь будет считать и кидать уведомление о завершении действия + результат (увеличение кол-ва ресурсов и все такое).</em></p>
<h2 id="протокол-сервер">Протокол (сервер)</h2>
<table style="width:17%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Название</strong></th>
<th><strong>Аргументы</strong></th>
<th><strong>Описание</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Mine</strong></td>
<td><strong>UnitId</strong> : int, <strong>X:</strong> int, <strong>Y</strong> : int</td>
<td>Возникает, когда игрок добывает ресурс. <strong>UnitId</strong> – идентификатор юнита, который майнит; <strong>X</strong>** , **** Y** – координаты ресурса.</td>
</tr>
<tr class="even">
<td><strong>Build</strong></td>
<td><strong>Type</strong> : int, <strong>X:</strong> int, <strong>Y</strong> : int, <strong>UnitId:</strong> int</td>
<td>Возникает, когда игрок строит здание. <strong>Type</strong> – тип постройки, <strong>X</strong>** , **** Y <strong>– координаты какого-то угла постройки;</strong> UnitId** - идентификатор юнита, который создает постройку.</td>
</tr>
<tr class="odd">
<td><strong>CreateObject</strong></td>
<td><strong>ObjectType</strong> : int, <strong>ObjectId</strong> : int, <strong>BuildingId:</strong> int</td>
<td>Возникает, когда игрок создает юнита. <strong>ObjectType</strong> – тип объекта, <strong>ObjectId</strong> - идентификатор объекта, <strong>Building</strong>** ****Id** <strong>–</strong> идентификатор постройки, в которой производится объект.</td>
</tr>
<tr class="even">
<td><strong>Upgrade</strong></td>
<td><strong>Type</strong> : int, <strong>ObjectType:</strong> int, <strong>ObjectId</strong> : int</td>
<td>Возникает, когда игрок делает апгрейд. <strong>Type</strong> – тип апгрейда, <strong>Object</strong>** ****Type** – тип объекта, для которого производится апгрейд, <strong>Object</strong>** ****Id** <strong>–</strong> идентификатор объекта, для которого производится апгрейд</td>
</tr>
<tr class="odd">
<td><strong>Move</strong></td>
<td><strong>Type:</strong> int, <strong>ObjectId:</strong> int, <strong>Direction:</strong> int, <strong>Count:</strong> int</td>
<td>Возникает, когда игрок перемещает объект. <strong>Type</strong> - тип объекта, <strong>ObjectId</strong> - идентификатор объекта, <strong>Direction</strong> - направление движения, <strong>Count</strong> - количество шагов в данном направлении.</td>
</tr>
<tr class="even">
<td><strong>Hit</strong></td>
<td><strong>ObjectType:</strong> int, <strong>ObjectId:</strong> int, <strong>TargetId:</strong> int, <strong>Type:</strong> int</td>
<td>Возникает при ударе(починке) объектом игрока другого объекта. <strong>ObjectType</strong> - тип объекта, <strong>ObjectId</strong> - идентификатор объекта, <strong>TargetId</strong> - идентификатор цели, <strong>Type</strong> - тип удара(починки).</td>
</tr>
<tr class="odd">
<td><strong>Scan</strong></td>
<td><strong>X:</strong> int, <strong>Y:</strong> int, <strong>ObjectId:</strong> int</td>
<td>Возникает при сканировании комнаты игроком. <strong>X</strong>** , **** Y <strong>– координаты команаты,</strong> ObjectId** - объект, производящий сканирование.</td>
</tr>
<tr class="even">
<td><strong>SelfDestruction</strong></td>
<td><strong>ObjectId</strong> : int</td>
<td>Возникает при самоуничтожении объекта игрока. <strong>ObjectId</strong> - идентификатор объекта</td>
</tr>
<tr class="odd">
<td><strong>Do</strong> (?)</td>
<td><strong>CommandList</strong> { <strong>Id: </strong>int, ** Object{}**}</td>
<td>Ход игрока. <strong>CommandList</strong> - список команд, <strong>Id</strong> - идентификатор команды, <strong>Object</strong> - объект, содержащий параметры команды.</td>
</tr>
</tbody>
</table>
<h2 id="протокол-клиент-1">Протокол (клиент)</h2>
<table style="width:17%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Название</strong></th>
<th><strong>Аргументы</strong></th>
<th><strong>Описание</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ChangeResCount</strong></td>
<td><strong>Type:</strong> int, <strong>Count:</strong> int/double?</td>
<td>Возникает, когда у игрока увеличивается/уменьшается количество ресурса. <strong>Type</strong> <strong>–</strong> тип ресурса, <strong>Count</strong> – количество, на которое увеличился ресурс (при уменьшении количества ресурса передается отрицательное значение).</td>
</tr>
<tr class="even">
<td><strong>ChangeUnitResCount</strong></td>
<td><strong>Type:</strong> int, <strong>UnitId:</strong> int, <strong>Count:</strong> int/double?</td>
<td>Возникает, когда у юнита игрока увеличивается/уменьшается количество ресурса. <strong>Type</strong> <strong>–</strong> тип ресурса, <strong>UnitId</strong> - идентификатор юнита, <strong>Count</strong> – количество, на которое увеличился ресурс (при уменьшении количества ресурса передается отрицательное значение).</td>
</tr>
<tr class="odd">
<td><strong>ChangeObjectHP</strong></td>
<td><strong>ObjectId:</strong> int, <strong>Count</strong> : int/double</td>
<td>Возникает при изменении очков здоровья у объекта игрока. <strong>ObjectId</strong> - идентификатор объекта, <strong>Count</strong> - количество добавленных HP (может быть отрицательным).</td>
</tr>
<tr class="even">
<td><strong>AddUnit</strong></td>
<td><strong>Type:</strong> int, <strong>X:</strong> int, <strong>Y:</strong> it, <strong>Id:</strong> int</td>
<td>Возникает, когда у игрока добавляется юнит. <strong>Type</strong> <strong>–</strong> тип юнита, <strong>X</strong>** , **** Y <strong>– координатыпоявления юнита;</strong> Id** – идентификатор юнита</td>
</tr>
<tr class="odd">
<td><strong>AddModule</strong></td>
<td><strong>Type:</strong> int, <strong>BuildingId:</strong> int</td>
<td>Возникает, когда у игрока добавляется модуль. <strong>Type</strong> <strong>–</strong> тип модуля, <strong>Building</strong>** ****Id** <strong>–</strong> идентификатор постройки, в которой добавился модуль.</td>
</tr>
<tr class="even">
<td><strong>AddBuilding</strong></td>
<td><strong>Type:</strong> int, <strong>X:</strong> int, <strong>Y:</strong> int, <strong>Id:</strong> int</td>
<td>Возникает, когда у игрока добавляется постройка. <strong>Type</strong> <strong>–</strong> тип постройки, <strong>X</strong>** , **** Y <strong>– координаты какого-то угла постройки;</strong> Id** – идентификатор постройки.</td>
</tr>
<tr class="odd">
<td><strong>AddUpgrade</strong></td>
<td><strong>Type</strong> : int, <strong>ObjectType:</strong> int, <strong>ObjectId</strong> : int</td>
<td>Возникает, когда у игрока добавляется апгрейд. <strong>Type</strong> – тип апгрейда, <strong>Object</strong>** ****Type** – тип объекта, для которого производится апгрейд, <strong>Object</strong>** ****Id** <strong>–</strong> идентификатор объекта, для которого производится апгрейд</td>
</tr>
<tr class="even">
<td><strong>Hit</strong></td>
<td><strong>PlayerId:</strong> int, <strong>ObjectId:</strong> int, <strong>TargetId:</strong> int, <strong>Damage:</strong> int</td>
<td>Возникает при ударе (починке) объектом игрока другого объекта. <strong>PlayerId</strong> - идентификатор игрока, чей объект наносит урон(чинит) объекту игрока. <strong>ObjectId</strong> - идентификатор объекта, <strong>TargetId</strong> - идентификатор цели, <strong>Damage</strong> - наносимый урон (в случае починки значение будет отрицательным).</td>
</tr>
<tr class="odd">
<td><strong>DestroyObject</strong></td>
<td><strong>ObjectId:</strong> int</td>
<td>Возникает при уничтожении объекта. <strong>ObjectId</strong> - идентификатор объекта</td>
</tr>
</tbody>
</table>
<h1 id="возможные-значения-переменных">Возможные значения переменных</h1>
<h2 id="тип-ресурса-00">Тип ресурса (00)</h2>
<table>
<thead>
<tr class="header">
<th>Идентификатор</th>
<th>Название</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0000</td>
<td>Iron</td>
</tr>
<tr class="even">
<td>0001</td>
<td>Silicon</td>
</tr>
<tr class="odd">
<td>0002</td>
<td>Uranium</td>
</tr>
<tr class="even">
<td>0003</td>
<td>Quartz</td>
</tr>
</tbody>
</table>
<h2 id="тип-постройки-01">Тип постройки (01)</h2>
<table>
<thead>
<tr class="header">
<th>Идентификатор</th>
<th>Название</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0100</td>
<td>Base</td>
</tr>
<tr class="even">
<td>0101</td>
<td>Storage</td>
</tr>
<tr class="odd">
<td>0102</td>
<td>ModuleFactory</td>
</tr>
<tr class="even">
<td>0103</td>
<td>Workshop</td>
</tr>
</tbody>
</table>
<h2 id="тип-объекта-02">Тип объекта (02)</h2>
<table>
<thead>
<tr class="header">
<th>Идентификатор</th>
<th>Название</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0200</td>
<td>Building</td>
</tr>
<tr class="even">
<td>0201</td>
<td>Unit</td>
</tr>
<tr class="odd">
<td>0202</td>
<td>Module</td>
</tr>
</tbody>
</table>
<h2 id="тип-модуля-03">Тип модуля (03)</h2>
<table>
<thead>
<tr class="header">
<th>Идентификатор</th>
<th>Название</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="тип-юнита-04">Тип юнита (04)</h2>
<table>
<thead>
<tr class="header">
<th>Идентификатор</th>
<th>Название</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="тип-апгрейда-05">Тип апгрейда (05)</h2>
<table>
<thead>
<tr class="header">
<th>Идентификатор</th>
<th>Название</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="тип-удара-06">Тип удара (06)</h2>
<table>
<thead>
<tr class="header">
<th>Идентификатор</th>
<th>Название</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
